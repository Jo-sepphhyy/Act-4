<!DOCTYPE html>
<html>
<head>
  <title></title>
  <style>
    @keyframes shake {
      0% { transform: translateX(0); }15% { transform: translateX(-12px); }
      30% { transform: translateX(12px); }
      45% { transform: translateX(-12px); }60% { transform: translateX(12px); }
      75% { transform: translateX(-8px); } 90% { transform: translateX(8px); }100% { transform: translateX(0); }
    }
    .shake {
      animation: shake 0.5s ease-in-out; }
    #otherGenderBox {
      display: none; margin-top: 5px;
    }
  </style>
</head>
<body>
    <p>" ctlr + alt + n " to open the form</p>
  <div id="formBox" style="border:1px solid black; padding:10px; width:250px; display:none;">
    <form id="myForm">
      <p>Name: <input type="text" id="name"></p>
      <p>Age: <input type="number" id="age"></p>
      <p>Gender:
        <select id="gender">
          <option value="">--Select--</option><option>Male</option>
          <option>Female</option>
          <option value="Other">Other</option>
        </select> </p>
      <div id="otherGenderBox">Please be specific: <input type="text" id="otherGender"></div>
      <button type="button" onclick="submitForm()">SAVE</button></form>
  </div>
  <div id="outputBox" style="border:1px solid black; padding:10px; width:250px; margin-top:10px; display:none;">
    <b>Submit info:</b> <div id="output"></div></div>

  <script>
    var form = document.getElementById("myForm");
    var formBox = document.getElementById("formBox");
    var outputBox = document.getElementById("outputBox");
    var nameField = document.getElementById("name");
    var ageField = document.getElementById("age");
    var genderField = document.getElementById("gender");
    var otherGenderBox = document.getElementById("otherGenderBox");
    var otherGenderField = document.getElementById("otherGender");
    var output = document.getElementById("output");
    genderField.addEventListener("change", function() {
      if (genderField.value === "Other") {
        otherGenderBox.style.display = "block";otherGenderField.focus();} else 
        {
        otherGenderBox.style.display = "none";otherGenderField.value = "";
      }
    });
    document.addEventListener("keydown", function(e) {
      if (e.ctrlKey && e.altKey && e.key.toLowerCase() === "n") {formBox.style.display = "block";
        nameField.focus();
      }
      if (e.key === "Escape") {if (document.activeElement.tagName === "INPUT" || document.activeElement.tagName === "SELECT") {
          document.activeElement.value = "";
        }
      }
      if (e.altKey && e.key === "r") {
        form.reset();
        otherGenderBox.style.display = "none"; }
    });
    form.addEventListener("keydown", function(e) {
      if (e.key === "Enter") {
        e.preventDefault();
        if (document.activeElement === nameField) { ageField.focus();
        } else if (document.activeElement === ageField) {genderField.focus();
        } else if (document.activeElement === genderField && genderField.value === "Other") {otherGenderField.focus();
        } else if (document.activeElement === otherGenderField || document.activeElement === genderField) {submitForm();
        }
      }
    });

    function submitForm() {
      var name = nameField.value.trim();
      var age = ageField.value.trim();
      var gender = genderField.value;
      var customGender = otherGenderField.value.trim();

      if (name === "" || age === "" || gender === "" || (gender === "Other" && customGender === "")) {
        formBox.classList.add("shake");  setTimeout(() => formBox.classList.remove("shake"), 500);
        return;
      }

      var data = {
        name: name, age: age, gender: gender === "Other" ? customGender : gender
      };
      localStorage.setItem("userData", JSON.stringify(data));

      outputBox.style.display = "block";
      output.innerHTML =
        "<p><b>Name:</b> " + name + "</p>" +
        "<p><b>Age:</b> " + age + "</p>" +
        "<p><b>Gender:</b> " + (gender === "Other" ? customGender : gender) + "</p>";
      
    }

    var savedData = localStorage.getItem("userData");
    if (savedData) {
      var d = JSON.parse(savedData);
      outputBox.style.display = "block";
      output.innerHTML =
        "<p><b>Name:</b> " + d.name + "</p>" +
        "<p><b>Age:</b> " + d.age + "</p>" +
        "<p><b>Gender:</b> " + d.gender + "</p>";
    }
  </script>
</body>
</html>
